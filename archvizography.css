/* ================================
   Archvizography — Loader (Clapper)
   ================================ */

/* Page palette */
.archvizography-page{
  --bg:#0b0b0b; --fg:#eaeaea; --muted:#b8b8b8; --line:#1a1a1a; --accent:#d07a5a;
  background:var(--bg); color:var(--fg);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
.archvizography-page a{color:inherit;text-decoration:none}

/* Loader shell */
.loader-claquette{
  /* Stage scale */
  --stage-w: min(520px, 78vw);

  /* PIVOT (percent within TOP image box) — tune these like XY in Photoshop */
  --pivot-x: 11.8%;
  --pivot-y: 28.0%;

  /* START angle of top board */
  --top-rot-start: -30deg;

  /* CLOSED placement of TOP over the BODY */
  --top-left: 0.8%;
  --top-top:  1.2%;

  /* Hinge graphic placement */
  --hinge-left: 1.0%;
  --hinge-top:  0.9%;

  position:fixed; inset:0; background:#000; z-index:9999;
  display:grid; grid-template-rows:1fr auto auto; place-items:center;
  opacity:1; visibility:visible;
  transition: opacity .25s ease, visibility 0s linear .25s; /* used on .is-out */
}

/* Curtains */
.avz-bars{position:absolute; left:0; width:100%; height:10vh; background:#000;}
.avz-top{top:0} .avz-bot{bottom:0}

/* Stage and parts */
.clap-stage{ position:relative; width:var(--stage-w); aspect-ratio: 3/2; display:grid; place-items:center; }
.clap-body{ position:relative; z-index:1; width:100%; height:auto; filter: drop-shadow(0 14px 46px rgba(0,0,0,.58)); transform: translateY(10px); }
.clap-hinge{ position:absolute; z-index:3; width:26%; left:var(--hinge-left); top:var(--hinge-top); pointer-events:none; filter: drop-shadow(0 8px 22px rgba(0,0,0,.52)); }

/* TOP = full stage width so it can land flush on the body */
.clap-top{
  position:absolute; z-index:2; width:100%;
  left:var(--top-left); top:var(--top-top);
  transform-origin: var(--pivot-x) var(--pivot-y);
  transform: rotate(var(--top-rot-start));
  filter: drop-shadow(0 12px 30px rgba(0,0,0,.5));
}

/* Wordmark (hidden until after clap) */
.reveal-mark{
  position:absolute; z-index:1; width:82%;
  opacity:0; transform: translateY(10px) scale(.985);
  filter: drop-shadow(0 8px 26px rgba(0,0,0,.5));
}

/* Progress */
.avz-progress{height:2px; width:min(520px, 82vw); margin:22px auto 8px; background:#ffffff18; border-radius:999px; overflow:hidden}
.avz-bar{display:block; height:100%; width:0; background:#fff; transition:width .3s ease}
.avz-percent{margin-bottom:20px; color:#9a9a9a; font-variant-numeric:tabular-nums}

/* ===== Motion: only when .play is added by JS ===== */

.loader-claquette.play .clap-top{
  animation: clapDown 1.4s cubic-bezier(.22,.61,.36,1) forwards;
}
.loader-claquette.play .reveal-mark{
  animation: markIn .9s cubic-bezier(.22,.61,.36,1) forwards;
  animation-delay: .55s; /* a beat after impact */
}

/* Curtains + fade when .is-out is added */
#avzLoader.is-out .avz-top { animation: barUp 1.1s ease forwards; }
#avzLoader.is-out .avz-bot { animation: barDown 1.1s ease forwards; }
#avzLoader.is-out          { opacity:0; visibility:hidden; }

/* Keyframes */
@keyframes clapDown{
  0%   { transform: rotate(var(--top-rot-start)); }
  62%  { transform: rotate(-2deg); }   /* almost shut */
  78%  { transform: rotate(5.5deg); }  /* rebound open a touch */
  100% { transform: rotate(0deg); }    /* settle shut */
}
@keyframes markIn{
  from { opacity:0; transform: translateY(10px) scale(.985); }
  to   { opacity:1; transform: translateY(0)    scale(1); }
}
@keyframes barUp   { to { transform: translateY(-100%); } }
@keyframes barDown { to { transform: translateY( 100%); } }

/* Performance */
.clap-top, .clap-body, .clap-hinge, .reveal-mark{ will-change: transform, opacity; transform: translateZ(0); }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .loader-claquette.play .clap-top{ animation:none !important; transform: rotate(0deg) !important; }
  .loader-claquette.play .reveal-mark{ animation:none !important; opacity:1 !important; transform:none !important; }
}

/* --- (Optional) Debug dots. Uncomment while tuning. ---
.clap-top::before{content:"";position:absolute;left:var(--pivot-x);top:var(--pivot-y);width:12px;height:12px;border-radius:50%;background:#ff4747;transform:translate(-50%,-50%);box-shadow:0 0 0 2px #000,0 0 12px rgba(255,0,0,.5)}
.clap-hinge::after{content:"";position:absolute;left:50%;top:50%;width:10px;height:10px;border-radius:50%;background:#47aaff;transform:translate(-50%,-50%);box-shadow:0 0 0 2px #000,0 0 12px rgba(0,180,255,.5)}
*/
