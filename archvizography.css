/* -----------------------------
   ARCHVIZOGRAPHY — LOADER ONLY
   Assumes all three SVGs share the
   exact same canvas (same W/H).
--------------------------------*/

.loader-claquette{
  --stage-w: min(560px, 82vw);

  /* PIVOT inside the .clap-top image (percentages of its own box) */
  --pivot-x: 11.5%;
  --pivot-y: 26.5%;

  /* Angle when the top is OPEN and when CLOSED */
  --open-angle: -32deg;
  --closed-angle: 0deg;

  position: fixed; inset: 0; background:#000; z-index:9999;
  display: grid; grid-template-rows: 1fr auto auto; place-items: center;
  opacity: 1; visibility: visible;
  transition: opacity .25s ease 2.8s, visibility 0s linear 3.05s; /* fades after anims */
}

/* Curtains (unchanged) */
.avz-bars{position:absolute; left:0; width:100%; height:10vh; background:#000;}
.avz-top{top:0} .avz-bot{bottom:0}
#avzLoader.is-out .avz-top{ animation: barUp 2.4s ease forwards;  animation-delay: .6s; }
#avzLoader.is-out .avz-bot{ animation: barDown 2.4s ease forwards; animation-delay: .6s; }
@keyframes barUp{to{transform:translateY(-100%)}}
@keyframes barDown{to{transform:translateY(100%)}}

/* Stage & parts */
.clap-stage{
  position:relative; width:var(--stage-w); aspect-ratio: 3/2;
  display:grid; place-items:center; contain:layout paint size;
}

/* All parts share the same canvas, so stack perfectly */
.clap-body,.clap-hinge,.clap-top,.reveal-mark{
  position:absolute; inset:0; width:100%; height:auto; display:block;
}

/* Depth order */
.clap-body { z-index: 1; filter: drop-shadow(0 14px 46px rgba(0,0,0,.58)); transform: translateY(8px); }
.clap-hinge{ z-index: 3; filter: drop-shadow(0 8px 22px rgba(0,0,0,.52)); }
.clap-top  { z-index: 2; filter: drop-shadow(0 12px 30px rgba(0,0,0,.5));
             transform-origin: var(--pivot-x) var(--pivot-y);
             transform: rotate(var(--open-angle)); }

/* Wordmark sits on the slate — tweak %s if your graphic’s layout differs */
.reveal-mark{
  z-index: 2; /* above body lines, below hinge */
  width: 74%;
  left: 13%;                  /* center on slate */
  top: 34%;                   /* align to the title line */
  opacity: 0; transform: translateY(10px) scale(.985);
  filter: drop-shadow(0 8px 26px rgba(0,0,0,.5));
}

/* Play sequence (JS adds .play then .is-out) */
.loader-claquette.play .clap-top   { animation: avzClap 1.6s cubic-bezier(.22,.61,.36,1) forwards; }
.loader-claquette.play .reveal-mark{ animation: markIn  .9s cubic-bezier(.22,.61,.36,1) .55s forwards; }

@keyframes avzClap{
  from { transform: rotate(var(--open-angle)); }
  60%  { transform: rotate(var(--closed-angle)); }
  80%  { transform: rotate(calc(var(--closed-angle) - 6deg)); }
  to   { transform: rotate(var(--closed-angle)); }
}
@keyframes markIn{
  from { opacity:0; transform: translateY(10px) scale(.985); }
  to   { opacity:1; transform: translateY(0)    scale(1); }
}

/* Progress (optional) */
.avz-progress{height:2px; width:min(520px,82vw); margin:22px auto 8px; background:#ffffff18; border-radius:999px; overflow:hidden}
.avz-bar{display:block; height:100%; width:0; background:#fff; transition:width .3s ease}
.avz-percent{margin-bottom:20px; color:#9a9a9a; font-variant-numeric:tabular-nums}

/* Performance */
.clap-top,.clap-body,.clap-hinge,.reveal-mark{ will-change: transform, opacity; transform: translateZ(0); }

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .clap-top{ transform: rotate(var(--closed-angle)) !important; animation:none !important; }
  .reveal-mark{ opacity:1 !important; transform:none !important; }
}
